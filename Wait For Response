{"modules":[{"id":"c4db25e6-0a6e-44e4-bfca-0e5d25dbd4e7","type":"Resume","branches":[],"parameters":[],"metadata":{"position":{"x":654,"y":534}}},{"id":"1b40bdee-1cc2-40ea-ad74-01e00b12e108","type":"LoopPrompts","branches":[{"condition":"Timeout","transition":"05200607-7fa2-4940-8c42-f6092fc2c296"}],"parameters":[{"name":"AudioPrompt","value":"arn:aws:connect:us-east-1:<accountnumber>/instance/<instanceid>/prompt/ff8edc23-7a90-4e8a-9c42-33715dc7a9d2","resourceName":"CustomerQueue.wav"},{"name":"InterruptSeconds","value":10}],"metadata":{"position":{"x":277,"y":112},"audio":[{"id":"arn:aws:connect:us-east-1:<accountnumber>/instance/<instanceid>/prompt/ff8edc23-7a90-4e8a-9c42-33715dc7a9d2","text":"CustomerQueue.wav","type":"Prompt","prompt":{"id":"arn:aws:connect:us-east-1:<accountnumber>/instance/<instanceid>/prompt/ff8edc23-7a90-4e8a-9c42-33715dc7a9d2","text":"CustomerQueue.wav"},"$$hashKey":"04D"}],"timeoutUnit":{"display":"Seconds","value":"sec"}}},{"id":"05200607-7fa2-4940-8c42-f6092fc2c296","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"427c5beb-a374-497c-bac7-3da3ea6783b3"},{"condition":"Error","transition":"349cf7b5-6b07-41f5-b9ad-4ca16a7a80c8"}],"parameters":[{"name":"FunctionArn","value":"ContactCheckAlertLambda"},{"name":"TimeLimit","value":"8"},{"name":"Parameter","key":"ContactId","value":"ContactId","namespace":"System"}],"metadata":{"position":{"x":692,"y":148},"dynamicMetadata":{"ContactId":true}},"target":"Lambda"},{"id":"f85b3a09-af97-4e26-ac9f-e35872fbeee3","type":"Transfer","branches":[{"condition":"Error","transition":"349cf7b5-6b07-41f5-b9ad-4ca16a7a80c8"}],"parameters":[{"name":"TimeLimit","value":"30"},{"name":"PhoneNumber","value":"+15555555555"},{"name":"SourceNumber","value":"+15555555555"}],"metadata":{"position":{"x":1290,"y":79},"SourceNumber":{"id":"48964c82-fcd2-46cc-9c8a-f8816ee7fdf0","text":"+15555555555","arn":null,"metricDetail":null,"resourceId":null},"CountryCode":"us"},"target":"PhoneNumber"},{"id":"427c5beb-a374-497c-bac7-3da3ea6783b3","type":"CheckAttribute","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"allow","transition":"f85b3a09-af97-4e26-ac9f-e35872fbeee3"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"deny","transition":"572b47ce-d7b4-4191-ab97-87d2f5872bce"},{"condition":"NoMatch","transition":"c4db25e6-0a6e-44e4-bfca-0e5d25dbd4e7"}],"parameters":[{"name":"Attribute","value":"response"},{"name":"Namespace","value":"External"}],"metadata":{"position":{"x":1021,"y":283},"conditionMetadata":[{"id":"67515c93-b501-4212-88c2-5ec2f6f80ea9","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"allow"},{"id":"d2ce1531-dab8-4c27-8416-3edc314550c5","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"deny"}]}},{"id":"349cf7b5-6b07-41f5-b9ad-4ca16a7a80c8","type":"Disconnect","branches":[],"parameters":[],"metadata":{"position":{"x":1001,"y":739}}},{"id":"572b47ce-d7b4-4191-ab97-87d2f5872bce","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"dd874428-a1bf-47c2-9adc-b5c707e09262"},{"condition":"Error","transition":"349cf7b5-6b07-41f5-b9ad-4ca16a7a80c8"}],"parameters":[{"name":"FunctionArn","value":"ContactRequestCallbackLambda"},{"name":"TimeLimit","value":"5"},{"name":"Parameter","key":"ContactId","value":"Customer Number","namespace":"System"}],"metadata":{"position":{"x":1303,"y":403},"dynamicMetadata":{"ContactId":true}},"target":"Lambda"},{"id":"dd874428-a1bf-47c2-9adc-b5c707e09262","type":"PlayPrompt","branches":[{"condition":"Success","transition":"349cf7b5-6b07-41f5-b9ad-4ca16a7a80c8"}],"parameters":[{"name":"Text","value":"Unfortunately, this contact center's owner is not available at this time.  We've sent a callback request for your number.  You'll hear back soon.  Have a nice day","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":1546,"y":452},"useDynamic":false}}],"version":"1","type":"customerQueue","start":"1b40bdee-1cc2-40ea-ad74-01e00b12e108","metadata":{"entryPointPosition":{"x":69,"y":97},"snapToGrid":false,"name":"Wait For Response","description":"Plays looping audio and offers a callback to the customer every thirty seconds","type":"customerQueue","status":"published","hash":"a289bcb9f7e3d014ef9296c550abb45c5e85b488c04ba2acb87cd287b42bc08c"}}